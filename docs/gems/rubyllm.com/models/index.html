<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <link rel="stylesheet" href="../assets/css/just-the-docs-default.css"> <link rel="stylesheet" href="../assets/css/just-the-docs-head-nav.css" id="jtd-head-nav-stylesheet"> <style id="jtd-nav-activation"> .site-nav > ul:nth-of-type(5) > li:not(:nth-child(4)) > a, .site-nav > ul:nth-of-type(5) > li > ul > li a { background-image: none; } .site-nav > ul:not(:nth-of-type(5)) a, .site-nav li.external a { background-image: none; } .site-nav > ul:nth-of-type(5) > li:nth-child(4) > a { font-weight: 600; text-decoration: none; } .site-nav > ul.nav-category-list > li > button svg, .site-nav > ul:nth-of-type(5) > li:nth-child(4) > button svg { transform: rotate(-90deg); } .site-nav > ul.nav-category-list > li.nav-list-item > ul.nav-list, .site-nav > ul:nth-of-type(5) > li.nav-list-item:nth-child(4) > ul.nav-list { display: block; } </style> <script src="../assets/js/vendor/lunr.min.js"></script> <script src="../assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <link rel="icon" href="../assets/images/logo.svg" type="image/x-icon"> <!-- Begin Jekyll SEO tag v2.8.0 --> <title>Model Registry | RubyLLM</title> <meta name="generator" content="Jekyll v4.4.1" /> <meta property="og:title" content="Model Registry" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="Access hundreds of AI models from all major providers with one simple API" /> <meta property="og:description" content="Access hundreds of AI models from all major providers with one simple API" /> <link rel="canonical" href="index.html" /> <meta property="og:url" content="https://rubyllm.com/models/" /> <meta property="og:site_name" content="RubyLLM" /> <meta property="og:image" content="https://rubyllm.com/assets/images/og/advanced/models.png" /> <meta property="og:image:height" content="600" /> <meta property="og:image:width" content="1200" /> <meta property="og:image:alt" content="Model Registry" /> <meta property="og:type" content="article" /> <meta property="article:published_time" content="2025-10-22T09:47:33+00:00" /> <meta name="twitter:card" content="summary_large_image" /> <meta property="twitter:image" content="https://rubyllm.com/assets/images/og/advanced/models.png" /> <meta name="twitter:image:alt" content="Model Registry" /> <meta property="twitter:title" content="Model Registry" /> <meta name="twitter:site" content="@paolino" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2025-10-22T09:47:33+00:00","datePublished":"2025-10-22T09:47:33+00:00","description":"Access hundreds of AI models from all major providers with one simple API","headline":"Model Registry","image":{"width":1200,"height":600,"alt":"Model Registry","url":"https://rubyllm.com/assets/images/og/advanced/models.png","@type":"imageObject"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://rubyllm.com/models/"},"publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://rubyllm.com/assets/images/logotype.svg"}},"url":"https://rubyllm.com/models/"}</script> <!-- End Jekyll SEO tag --> <!-- Auto Dark Mode - Must run immediately to prevent flash --> <script src="../assets/js/auto-dark-mode.js"></script> <link rel="icon" type="image/png" href="../assets/images/favicon/favicon-96x96.png" sizes="96x96" /> <link rel="icon" type="image/svg+xml" href="../assets/images/logo.svg" /> <link rel="shortcut icon" href="../assets/images/favicon/favicon.ico" /> <link rel="apple-touch-icon" sizes="180x180" href="../assets/images/favicon/apple-touch-icon.png" /> <meta name="apple-mobile-web-app-title" content="RubyLLM" /> <link rel="manifest" href="../assets/images/favicon/site.webmanifest" /> <!-- Override Twitter card type to use large image --> <meta name="twitter:card" content="summary_large_image"> <script defer data-domain="rubyllm.com" src="https://stats.paolino.me/js/script.outbound-links.js"></script> </head> <body> <a class="skip-to-main" href="index.html#main-content">Skip to main content</a> <svg xmlns="http://www.w3.org/2000/svg" class="d-none"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <!-- Feather. MIT License: https://github.com/feathericons/feather/blob/master/LICENSE --> <symbol id="svg-external-link" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-external-link"> <title id="svg-external-link-title">(external link)</title> <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <!-- Bootstrap Icons. MIT License: https://github.com/twbs/icons/blob/main/LICENSE.md --> <symbol id="svg-copy" viewBox="0 0 16 16"> <title>Copy</title> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard" viewBox="0 0 16 16"> <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"/> <path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"/> </svg> </symbol> <symbol id="svg-copied" viewBox="0 0 16 16"> <title>Copied</title> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard-check-fill" viewBox="0 0 16 16"> <path d="M6.5 0A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3Zm3 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3Z"/> <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1A2.5 2.5 0 0 1 9.5 5h-3A2.5 2.5 0 0 1 4 2.5v-1Zm6.854 7.354-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 0 1 .708-.708L7.5 10.793l2.646-2.647a.5.5 0 0 1 .708.708Z"/> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header" role="banner"> <a href="../index.html" class="site-title lh-tight"> <div class="site-logo" role="img" aria-label="RubyLLM"></div> </a> <button id="menu-button" class="site-button btn-reset" aria-label="Toggle menu" aria-pressed="false"> <svg viewBox="0 0 24 24" class="icon" aria-hidden="true"><use xlink:href="#svg-menu"></use></svg> </button> </div> <nav aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item"><a href="../index.html" class="nav-list-link">Home</a></li></ul> <ul class="nav-list"><li class="nav-list-item external"> <a href="https://github.com/crmne/ruby_llm" class="nav-list-link external" > GitHub <svg viewBox="0 0 24 24" aria-labelledby="svg-external-link-title"><use xlink:href="#svg-external-link"></use></svg> </a> </li><li class="nav-list-item external"> <a href="https://github.com/crmne/ruby_llm/releases" class="nav-list-link external" > Changelog <svg viewBox="0 0 24 24" aria-labelledby="svg-external-link-title"><use xlink:href="#svg-external-link"></use></svg> </a> </li><li class="nav-list-item external"> <a href="https://paolino.me" class="nav-list-link external" > Blog <svg viewBox="0 0 24 24" aria-labelledby="svg-external-link-title"><use xlink:href="#svg-external-link"></use></svg> </a> </li></ul> <div class="nav-category">Getting Started</div> <ul class="nav-list"><li class="nav-list-item"><a href="../getting-started/index.html" class="nav-list-link">Getting Started</a></li><li class="nav-list-item"><a href="../overview/index.html" class="nav-list-link">Overview</a></li><li class="nav-list-item"><a href="../configuration/index.html" class="nav-list-link">Configuration</a></li></ul> <div class="nav-category">Core Features</div> <ul class="nav-list"><li class="nav-list-item"><a href="../chat/index.html" class="nav-list-link">Chat</a></li><li class="nav-list-item"><a href="../tools/index.html" class="nav-list-link">Tools</a></li><li class="nav-list-item"><a href="../streaming/index.html" class="nav-list-link">Stream Responses</a></li><li class="nav-list-item"><a href="../embeddings/index.html" class="nav-list-link">Embeddings</a></li><li class="nav-list-item"><a href="../image-generation/index.html" class="nav-list-link">Image Generation</a></li><li class="nav-list-item"><a href="../audio-transcription/index.html" class="nav-list-link">Audio Transcription</a></li><li class="nav-list-item"><a href="../moderation/index.html" class="nav-list-link">Moderation</a></li></ul> <div class="nav-category">Advanced</div> <ul class="nav-list"><li class="nav-list-item"><a href="../rails/index.html" class="nav-list-link">Rails Integration</a></li><li class="nav-list-item"><a href="../async/index.html" class="nav-list-link">Scale with Async</a></li><li class="nav-list-item"><a href="../error-handling/index.html" class="nav-list-link">Error Handling</a></li><li class="nav-list-item"><a href="index.html" class="nav-list-link">Model Registry</a></li><li class="nav-list-item"><a href="../agentic-workflows/index.html" class="nav-list-link">Agentic Workflows</a></li><li class="nav-list-item"><a href="../upgrading/index.html" class="nav-list-link">Upgrading</a></li></ul> <div class="nav-category">Reference</div> <ul class="nav-list"><li class="nav-list-item"><a href="../available-models/index.html" class="nav-list-link">Available Models</a></li><li class="nav-list-item"><a href="../ecosystem/index.html" class="nav-list-link">RubyLLM Ecosystem</a></li></ul> </nav> <footer class="site-footer"> This site uses <a href="https://github.com/just-the-docs/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll. </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search" role="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search RubyLLM" aria-label="Search RubyLLM" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> </div> <div class="main-content-wrap"> <div id="main-content" class="main-content"> <main> <h1 class="no_toc" id="model-registry"> <a href="index.html#model-registry" class="anchor-heading" aria-labelledby="model-registry"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Model Registry </h1> <p class="fs-6 fw-300">Access hundreds of AI models from all major providers with one simple API</p> <h2 class="no_toc text-delta" id="table-of-contents"> <a href="index.html#table-of-contents" class="anchor-heading" aria-labelledby="table-of-contents"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Table of contents </h2> <ol id="markdown-toc"> <li><a href="index.html#the-model-registry" id="markdown-toc-the-model-registry">The Model Registry</a> <ol> <li><a href="index.html#refreshing-the-registry" id="markdown-toc-refreshing-the-registry">Refreshing the Registry</a></li> </ol> </li> <li><a href="index.html#exploring-and-finding-models" id="markdown-toc-exploring-and-finding-models">Exploring and Finding Models</a> <ol> <li><a href="index.html#listing-and-filtering" id="markdown-toc-listing-and-filtering">Listing and Filtering</a></li> <li><a href="index.html#finding-a-specific-model" id="markdown-toc-finding-a-specific-model">Finding a Specific Model</a></li> <li><a href="index.html#model-aliases" id="markdown-toc-model-aliases">Model Aliases</a></li> <li><a href="index.html#provider-specific-resolution" id="markdown-toc-provider-specific-resolution">Provider-Specific Resolution</a></li> </ol> </li> <li><a href="index.html#connecting-to-custom-endpoints--using-unlisted-models" id="markdown-toc-connecting-to-custom-endpoints--using-unlisted-models">Connecting to Custom Endpoints &amp; Using Unlisted Models</a> <ol> <li><a href="index.html#custom-openai-api-base-url-openai_api_base" id="markdown-toc-custom-openai-api-base-url-openai_api_base">Custom OpenAI API Base URL (<code class="language-plaintext highlighter-rouge">openai_api_base</code>)</a></li> <li><a href="index.html#assuming-model-existence-assume_model_exists" id="markdown-toc-assuming-model-existence-assume_model_exists">Assuming Model Existence (<code class="language-plaintext highlighter-rouge">assume_model_exists</code>)</a></li> </ol> </li> </ol><hr /> <p>After reading this guide, you will know:</p> <ul> <li>How RubyLLM discovers and registers models.</li> <li>How to find and filter available models based on provider, type, or capabilities.</li> <li>How to understand model capabilities and pricing using <code class="language-plaintext highlighter-rouge">Model::Info</code>.</li> <li>How to use model aliases for convenience.</li> <li>How to connect to custom endpoints (like Azure OpenAI or proxies) using <code class="language-plaintext highlighter-rouge">openai_api_base</code>.</li> <li>How to use models not listed in the default registry using <code class="language-plaintext highlighter-rouge">assume_model_exists</code>.</li> </ul> <h2 id="the-model-registry"> <a href="index.html#the-model-registry" class="anchor-heading" aria-labelledby="the-model-registry"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> The Model Registry </h2> <p>RubyLLM maintains an internal registry of known AI models, typically stored in <code class="language-plaintext highlighter-rouge">lib/ruby_llm/models.json</code> within the gem. This registry is populated by running the <code class="language-plaintext highlighter-rouge">rake models:update</code> task, which queries the APIs of configured providers to discover their available models and capabilities.</p> <p>The registry stores crucial information about each model, including:</p> <ul> <li><strong><code class="language-plaintext highlighter-rouge">id</code></strong>: The unique identifier used by the provider (e.g., <code class="language-plaintext highlighter-rouge">gpt-4o-2024-08-06</code>).</li> <li><strong><code class="language-plaintext highlighter-rouge">provider</code></strong>: The source provider (<code class="language-plaintext highlighter-rouge">openai</code>, <code class="language-plaintext highlighter-rouge">anthropic</code>, etc.).</li> <li><strong><code class="language-plaintext highlighter-rouge">type</code></strong>: The model’s primary function (<code class="language-plaintext highlighter-rouge">chat</code>, <code class="language-plaintext highlighter-rouge">embedding</code>, etc.).</li> <li><strong><code class="language-plaintext highlighter-rouge">name</code></strong>: A human-friendly name.</li> <li><strong><code class="language-plaintext highlighter-rouge">context_window</code></strong>: Max input tokens (e.g., <code class="language-plaintext highlighter-rouge">128_000</code>).</li> <li><strong><code class="language-plaintext highlighter-rouge">max_tokens</code></strong>: Max output tokens (e.g., <code class="language-plaintext highlighter-rouge">16_384</code>).</li> <li><strong><code class="language-plaintext highlighter-rouge">supports_vision</code></strong>: If it can process images and videos.</li> <li><strong><code class="language-plaintext highlighter-rouge">supports_functions</code></strong>: If it can use <a href="../tools/index.html">Tools</a>.</li> <li><strong><code class="language-plaintext highlighter-rouge">input_price_per_million</code></strong>: Cost in USD per 1 million input tokens.</li> <li><strong><code class="language-plaintext highlighter-rouge">output_price_per_million</code></strong>: Cost in USD per 1 million output tokens.</li> <li><strong><code class="language-plaintext highlighter-rouge">family</code></strong>: A broader classification (e.g., <code class="language-plaintext highlighter-rouge">gpt4o</code>).</li> </ul> <p>This registry allows RubyLLM to validate models, route requests correctly, provide capability information, and offer convenient filtering.</p> <p>You can see the full list of currently registered models in the <a href="../available-models/index.html">Available Models Guide</a>.</p> <h3 id="refreshing-the-registry"> <a href="index.html#refreshing-the-registry" class="anchor-heading" aria-labelledby="refreshing-the-registry"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Refreshing the Registry </h3> <p><strong>For Application Developers:</strong></p> <p>The recommended way to refresh models in your application is to call <code class="language-plaintext highlighter-rouge">RubyLLM.models.refresh!</code> directly:</p> <div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># In your application code (console, background job, etc.)</span>
<span class="no">RubyLLM</span><span class="p">.</span><span class="nf">models</span><span class="p">.</span><span class="nf">refresh!</span>
<span class="nb">puts</span> <span class="s2">"Refreshed in-memory model list."</span>
</code></pre></div></div> <p>This refreshes the in-memory model registry and is what you want 99% of the time. This method is safe to call from Rails applications, background jobs, or any running Ruby process.</p> <p><strong>Important:</strong> <code class="language-plaintext highlighter-rouge">refresh!</code> only updates the in-memory registry. To persist changes to disk, call:</p> <div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="no">RubyLLM</span><span class="p">.</span><span class="nf">models</span><span class="p">.</span><span class="nf">refresh!</span>
<span class="no">RubyLLM</span><span class="p">.</span><span class="nf">models</span><span class="p">.</span><span class="nf">save_to_json</span>  <span class="c1"># Saves to configured model_registry_file (v1.9.0+)</span>
</code></pre></div></div> <p>If your gem directory is read-only, configure a writable location with <code class="language-plaintext highlighter-rouge">config.model_registry_file</code> (v1.9.0+). See the <a href="../configuration/index.html#model-registry-file">Configuration Guide</a> for details.</p> <p><strong>How refresh! Works:</strong></p> <p>The <code class="language-plaintext highlighter-rouge">refresh!</code> method performs the following steps:</p> <ol> <li><strong>Fetches from configured providers</strong>: Queries the APIs of all configured providers (OpenAI, Anthropic, Ollama, etc.) to get their current list of available models.</li> <li><strong>Fetches from Parsera API</strong>: Retrieves comprehensive model metadata from <a href="https://parsera.org">Parsera</a>, a free service that aggregates LLM documentation across providers. Parsera provides detailed information about model capabilities, pricing, context windows, and more.</li> <li><strong>Merges the data</strong>: Combines provider-specific data with Parsera’s metadata. Provider data takes precedence for availability, while Parsera enriches models with additional details.</li> <li><strong>Updates the in-memory registry</strong>: Replaces the current registry with the refreshed data.</li> </ol> <p>The method returns a chainable <code class="language-plaintext highlighter-rouge">Models</code> instance, allowing you to immediately query the updated registry:</p> <div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Refresh and immediately query</span>
<span class="n">chat_models</span> <span class="o">=</span> <span class="no">RubyLLM</span><span class="p">.</span><span class="nf">models</span><span class="p">.</span><span class="nf">refresh!</span><span class="p">.</span><span class="nf">chat_models</span>
</code></pre></div></div> <p><strong>Note:</strong> We’re grateful to <a href="https://parsera.org">Parsera</a> for providing their free API service to the LLM developer community. They maintain comprehensive, up-to-date model information by scraping provider documentation, making it available to all developers in a standardized JSON format. If you encounter issues with model data, please <a href="https://github.com/parsera-labs/api-llm-specs/issues">file issues with Parsera</a>.</p> <p><strong>Local Provider Models:</strong></p> <p>By default, <code class="language-plaintext highlighter-rouge">refresh!</code> includes models from local providers like Ollama and GPUStack if they’re configured. To exclude local providers and only fetch from remote APIs:</p> <div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Only fetch from remote providers (Anthropic, OpenAI, etc.)</span>
<span class="no">RubyLLM</span><span class="p">.</span><span class="nf">models</span><span class="p">.</span><span class="nf">refresh!</span><span class="p">(</span><span class="ss">remote_only: </span><span class="kp">true</span><span class="p">)</span>
</code></pre></div></div> <p>This is useful when you want to refresh only cloud-based models without querying local model servers.</p> <p><strong>For Gem Development:</strong></p> <p>The <code class="language-plaintext highlighter-rouge">rake models:update</code> task is designed for gem maintainers and updates the <code class="language-plaintext highlighter-rouge">models.json</code> file shipped with the gem:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Only for gem development - requires API keys and gem directory structure</span>
bundle <span class="nb">exec </span>rake models:update
</code></pre></div></div> <p>This task is not intended for Rails applications as it writes to gem directories and requires the full gem development environment.</p> <p><strong>Persisting Models to Your Database:</strong></p> <p>For Rails applications, the install generator sets up everything automatically:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>rails generate ruby_llm:install
rails db:migrate
</code></pre></div></div> <p>This creates the Model table and loads model data from the gem’s registry.</p> <p>To refresh model data from provider APIs:</p> <div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Fetches latest model info from configured providers (requires API keys)</span>
<span class="no">Model</span><span class="p">.</span><span class="nf">refresh!</span>
</code></pre></div></div> <h2 id="exploring-and-finding-models"> <a href="index.html#exploring-and-finding-models" class="anchor-heading" aria-labelledby="exploring-and-finding-models"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Exploring and Finding Models </h2> <p>Use <code class="language-plaintext highlighter-rouge">RubyLLM.models</code> to explore the registry.</p> <h3 id="listing-and-filtering"> <a href="index.html#listing-and-filtering" class="anchor-heading" aria-labelledby="listing-and-filtering"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Listing and Filtering </h3> <div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Get a collection of all registered models</span>
<span class="n">all_models</span> <span class="o">=</span> <span class="no">RubyLLM</span><span class="p">.</span><span class="nf">models</span><span class="p">.</span><span class="nf">all</span>

<span class="c1"># Filter by type</span>
<span class="n">chat_models</span> <span class="o">=</span> <span class="no">RubyLLM</span><span class="p">.</span><span class="nf">models</span><span class="p">.</span><span class="nf">chat_models</span>
<span class="n">embedding_models</span> <span class="o">=</span> <span class="no">RubyLLM</span><span class="p">.</span><span class="nf">models</span><span class="p">.</span><span class="nf">embedding_models</span>

<span class="c1"># Filter by provider</span>
<span class="n">openai_models</span> <span class="o">=</span> <span class="no">RubyLLM</span><span class="p">.</span><span class="nf">models</span><span class="p">.</span><span class="nf">by_provider</span><span class="p">(</span><span class="ss">:openai</span><span class="p">)</span> <span class="c1"># or 'openai'</span>

<span class="c1"># Filter by model family (e.g., all Claude 3 Sonnet variants)</span>
<span class="n">claude3_sonnet_family</span> <span class="o">=</span> <span class="no">RubyLLM</span><span class="p">.</span><span class="nf">models</span><span class="p">.</span><span class="nf">by_family</span><span class="p">(</span><span class="s1">'claude3_sonnet'</span><span class="p">)</span>

<span class="c1"># Chain filters and use Enumerable methods</span>
<span class="n">openai_vision_models</span> <span class="o">=</span> <span class="no">RubyLLM</span><span class="p">.</span><span class="nf">models</span><span class="p">.</span><span class="nf">by_provider</span><span class="p">(</span><span class="ss">:openai</span><span class="p">)</span>
                                   <span class="p">.</span><span class="nf">select</span><span class="p">(</span><span class="o">&amp;</span><span class="ss">:supports_vision?</span><span class="p">)</span>

<span class="nb">puts</span> <span class="s2">"Found </span><span class="si">#{</span><span class="n">openai_vision_models</span><span class="p">.</span><span class="nf">count</span><span class="si">}</span><span class="s2"> OpenAI vision models."</span>
</code></pre></div></div> <h3 id="finding-a-specific-model"> <a href="index.html#finding-a-specific-model" class="anchor-heading" aria-labelledby="finding-a-specific-model"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Finding a Specific Model </h3> <p>Use <code class="language-plaintext highlighter-rouge">find</code> to get a <code class="language-plaintext highlighter-rouge">Model::Info</code> object containing details about a specific model.</p> <div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Find by exact ID or alias</span>
<span class="n">model_info</span> <span class="o">=</span> <span class="no">RubyLLM</span><span class="p">.</span><span class="nf">models</span><span class="p">.</span><span class="nf">find</span><span class="p">(</span><span class="s1">'gpt-4.1'</span><span class="p">)</span>

<span class="k">if</span> <span class="n">model_info</span>
  <span class="nb">puts</span> <span class="s2">"Model: </span><span class="si">#{</span><span class="n">model_info</span><span class="p">.</span><span class="nf">name</span><span class="si">}</span><span class="s2">"</span>
  <span class="nb">puts</span> <span class="s2">"Provider: </span><span class="si">#{</span><span class="n">model_info</span><span class="p">.</span><span class="nf">provider</span><span class="si">}</span><span class="s2">"</span>
  <span class="nb">puts</span> <span class="s2">"Context Window: </span><span class="si">#{</span><span class="n">model_info</span><span class="p">.</span><span class="nf">context_window</span><span class="si">}</span><span class="s2"> tokens"</span>
<span class="k">else</span>
  <span class="nb">puts</span> <span class="s2">"Model not found."</span>
<span class="k">end</span>

<span class="c1"># Find raises ModelNotFoundError if the ID is unknown</span>
<span class="c1"># RubyLLM.models.find('no-such-model-exists') # =&gt; raises ModelNotFoundError</span>
</code></pre></div></div> <h3 id="model-aliases"> <a href="index.html#model-aliases" class="anchor-heading" aria-labelledby="model-aliases"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Model Aliases </h3> <p>RubyLLM uses aliases (defined in <code class="language-plaintext highlighter-rouge">lib/ruby_llm/aliases.json</code>) for convenience, mapping common names to specific versions.</p> <div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># 'claude-sonnet-4' might resolve to 'claude-3-5-sonnet-20241022'</span>
<span class="n">chat</span> <span class="o">=</span> <span class="no">RubyLLM</span><span class="p">.</span><span class="nf">chat</span><span class="p">(</span><span class="ss">model: </span><span class="s1">'claude-sonnet-4'</span><span class="p">)</span>
<span class="nb">puts</span> <span class="n">chat</span><span class="p">.</span><span class="nf">model</span><span class="p">.</span><span class="nf">id</span> <span class="c1"># =&gt; "claude-3-5-sonnet-20241022" (or latest version)</span>
</code></pre></div></div> <p><code class="language-plaintext highlighter-rouge">find</code> prioritizes exact ID matches before falling back to aliases.</p> <h3 id="provider-specific-resolution"> <a href="index.html#provider-specific-resolution" class="anchor-heading" aria-labelledby="provider-specific-resolution"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Provider-Specific Resolution </h3> <p>Specify the provider if the same alias exists across multiple providers.</p> <div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Get Claude 3.5 Sonnet from Anthropic</span>
<span class="n">model_anthropic</span> <span class="o">=</span> <span class="no">RubyLLM</span><span class="p">.</span><span class="nf">models</span><span class="p">.</span><span class="nf">find</span><span class="p">(</span><span class="s1">'claude-sonnet-4'</span><span class="p">,</span> <span class="ss">:anthropic</span><span class="p">)</span>

<span class="c1"># Get Claude 3.5 Sonnet via AWS Bedrock</span>
<span class="n">model_bedrock</span> <span class="o">=</span> <span class="no">RubyLLM</span><span class="p">.</span><span class="nf">models</span><span class="p">.</span><span class="nf">find</span><span class="p">(</span><span class="s1">'claude-sonnet-4'</span><span class="p">,</span> <span class="ss">:bedrock</span><span class="p">)</span>
</code></pre></div></div> <h2 class="d-inline-block" id="connecting-to-custom-endpoints--using-unlisted-models"> <a href="index.html#connecting-to-custom-endpoints--using-unlisted-models" class="anchor-heading" aria-labelledby="connecting-to-custom-endpoints--using-unlisted-models"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Connecting to Custom Endpoints &amp; Using Unlisted Models </h2> <p>Sometimes you need to interact with models or endpoints not covered by the standard registry, such as:</p> <ul> <li>Azure OpenAI Service endpoints.</li> <li>API Proxies &amp; Gateways (LiteLLM, Fastly AI Accelerator).</li> <li>Self-Hosted/Local Models (LM Studio, Ollama via OpenAI adapter).</li> <li>Brand-new model releases.</li> <li>Custom fine-tunes or deployments with unique names.</li> </ul> <p>RubyLLM offers two mechanisms for these cases:</p> <h3 id="custom-openai-api-base-url-openai_api_base"> <a href="index.html#custom-openai-api-base-url-openai_api_base" class="anchor-heading" aria-labelledby="custom-openai-api-base-url-openai_api_base"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Custom OpenAI API Base URL (<code class="language-plaintext highlighter-rouge">openai_api_base</code>) </h3> <p>If you need to target an endpoint that uses the <strong>OpenAI API format</strong> but has a different URL, configure <code class="language-plaintext highlighter-rouge">openai_api_base</code> in <code class="language-plaintext highlighter-rouge">RubyLLM.configure</code>.</p> <div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># config/initializers/ruby_llm.rb</span>
<span class="no">RubyLLM</span><span class="p">.</span><span class="nf">configure</span> <span class="k">do</span> <span class="o">|</span><span class="n">config</span><span class="o">|</span>
  <span class="n">config</span><span class="p">.</span><span class="nf">openai_api_key</span> <span class="o">=</span> <span class="no">ENV</span><span class="p">[</span><span class="s1">'AZURE_OPENAI_KEY'</span><span class="p">]</span> <span class="c1"># Key for your endpoint</span>
  <span class="n">config</span><span class="p">.</span><span class="nf">openai_api_base</span> <span class="o">=</span> <span class="s2">"https://YOUR_AZURE_RESOURCE.openai.azure.com"</span> <span class="c1"># Your endpoint</span>
<span class="k">end</span>
</code></pre></div></div> <ul> <li>This setting <strong>only</strong> affects requests made with <code class="language-plaintext highlighter-rouge">provider: :openai</code>.</li> <li>It directs those requests to your specified URL instead of <code class="language-plaintext highlighter-rouge">https://api.openai.com/v1</code>.</li> <li>See <a href="../configuration/index.html">Configuration Guide</a>.</li> </ul> <h3 id="assuming-model-existence-assume_model_exists"> <a href="index.html#assuming-model-existence-assume_model_exists" class="anchor-heading" aria-labelledby="assuming-model-existence-assume_model_exists"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Assuming Model Existence (<code class="language-plaintext highlighter-rouge">assume_model_exists</code>) </h3> <p>To use a model identifier not listed in RubyLLM’s registry, use the <code class="language-plaintext highlighter-rouge">assume_model_exists: true</code> flag. This tells RubyLLM to bypass its validation check.</p> <div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Example: Using a custom Azure deployment name</span>
<span class="c1"># Assumes openai_api_base is configured for your Azure endpoint</span>
<span class="n">chat</span> <span class="o">=</span> <span class="no">RubyLLM</span><span class="p">.</span><span class="nf">chat</span><span class="p">(</span>
  <span class="ss">model: </span><span class="s1">'my-company-secure-gpt4o'</span><span class="p">,</span> <span class="c1"># Your custom deployment name</span>
  <span class="ss">provider: :openai</span><span class="p">,</span>                <span class="c1"># MUST specify provider</span>
  <span class="ss">assume_model_exists: </span><span class="kp">true</span>         <span class="c1"># Bypass registry check</span>
<span class="p">)</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">chat</span><span class="p">.</span><span class="nf">ask</span><span class="p">(</span><span class="s2">"Internal knowledge query..."</span><span class="p">)</span>
<span class="nb">puts</span> <span class="n">response</span><span class="p">.</span><span class="nf">content</span>

<span class="c1"># You can also use it in .with_model</span>
<span class="n">chat</span><span class="p">.</span><span class="nf">with_model</span><span class="p">(</span>
  <span class="s1">'gpt-5-alpha'</span><span class="p">,</span>
  <span class="ss">provider: :openai</span><span class="p">,</span>                <span class="c1"># MUST specify provider</span>
  <span class="ss">assume_exists: </span><span class="kp">true</span>
<span class="p">)</span>
</code></pre></div></div> <p>The <code class="language-plaintext highlighter-rouge">assume_model_exists</code> flag also works with <code class="language-plaintext highlighter-rouge">RubyLLM.embed</code> and <code class="language-plaintext highlighter-rouge">RubyLLM.paint</code> for embedding and image generation models:</p> <div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Custom embedding model</span>
<span class="n">embedding</span> <span class="o">=</span> <span class="no">RubyLLM</span><span class="p">.</span><span class="nf">embed</span><span class="p">(</span>
  <span class="s2">"Test text"</span><span class="p">,</span>
  <span class="ss">model: </span><span class="s1">'my-custom-embedder'</span><span class="p">,</span>
  <span class="ss">provider: :openai</span><span class="p">,</span>
  <span class="ss">assume_model_exists: </span><span class="kp">true</span>
<span class="p">)</span>

<span class="c1"># Custom image model</span>
<span class="n">image</span> <span class="o">=</span> <span class="no">RubyLLM</span><span class="p">.</span><span class="nf">paint</span><span class="p">(</span>
  <span class="s2">"A beautiful landscape"</span><span class="p">,</span>
  <span class="ss">model: </span><span class="s1">'my-custom-dalle'</span><span class="p">,</span>
  <span class="ss">provider: :openai</span><span class="p">,</span>
  <span class="ss">assume_model_exists: </span><span class="kp">true</span>
<span class="p">)</span>
</code></pre></div></div> <p><strong>Key Points when Assuming Existence:</strong></p> <ul> <li><strong><code class="language-plaintext highlighter-rouge">provider:</code> is Mandatory:</strong> You must tell RubyLLM which API format to use (<code class="language-plaintext highlighter-rouge">ArgumentError</code> otherwise).</li> <li><strong>No Validation:</strong> RubyLLM won’t check the registry for the model ID.</li> <li><strong>Capability Assumptions:</strong> Capability checks (like <code class="language-plaintext highlighter-rouge">supports_functions?</code>) are bypassed by assuming <code class="language-plaintext highlighter-rouge">true</code>. You are responsible for ensuring the model supports the features you use.</li> <li><strong>Your Responsibility:</strong> Ensure the model ID is correct for the target endpoint.</li> <li><strong>Warning Log:</strong> A warning is logged indicating validation was skipped.</li> </ul> <p>Use these features when the standard registry doesn’t cover your specific model or endpoint needs. For standard models, rely on the registry for validation and capability awareness. See the <a href="../chat/index.html">Chat Guide</a> for more on using the <code class="language-plaintext highlighter-rouge">chat</code> object.</p> </main> <hr> <footer> Brought to you by <a href="https://paolino.me">Carmine Paolino</a>, maker of <a href="https://chatwithwork.com"><img src="https://chatwithwork.com/logotype.svg" alt="Chat with Work" class="chatwithwork-logo" style="height: 1.8em; vertical-align: middle; margin: 0 0.25em;"></a> <em style="font-size: 0.85em; opacity: 0.8;">— Claude Code for your documents</em> <div class="d-flex mt-2"> </div> </footer> </div> </div> <div class="search-overlay"></div> </div> </body> </html>
